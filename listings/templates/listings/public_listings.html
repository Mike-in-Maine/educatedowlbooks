{% extends "main/base.html" %}

{% block title %}Books for Sale{% endblock %}

{% block content %}

<h2>Books for Sale</h2>

<form method="get">
    <input
        type="text"
        name="q"
        placeholder="Search by title, author, ISBN"
        value="{{ query }}"
        style="width: 300px;"
    />
    <button type="submit">Search</button>
</form>

<hr>

{% for listing in listings %}
    <div style="display: flex; gap: 15px; border-bottom: 1px solid #ddd; padding: 15px 0;">

        {% if listing.book.cover_image %}
            <img
                src="{{ listing.book.cover_image.url }}"
                alt="{{ listing.book.isbn10 }}"

                style="width: 80px; height: auto; object-fit: contain;"   
            >
            
        {% else %}
            <div style="width: 80px; height: 120px; background: #eee; display: flex; align-items: center; justify-content: center; font-size: 12px;">
                No cover
            </div>
        {% endif %}

        <div>
            <strong>{{ listing.book.title }}</strong><br>
            {{ listing.book.author }}<br>
            Condition: {{ listing.get_condition_display }}<br>
            <strong>${{ listing.price }}</strong><br>
            <small>Seller: {{ listing.seller.display_name }}</small>
        </div>

    </div>
{% empty %}
    <p>No books found.</p>
{% endfor %}


{% endblock %}
